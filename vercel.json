{
  "version": 2,

  /*
    SPA fallback + keep API paths intact.
    IMPORTANT: Do NOT include legacy `routes` if you use `rewrites`.
  */
  "rewrites": [
    { "source": "/api/(.*)", "destination": "/api/$1" },
    { "source": "/(.*)", "destination": "/index.html" }
  ],

  /*
    Tell Vercel which runtime to use for your JS functions in /api.
    Use a *valid* runtime version string. nodejs22.x matches your project setting.
  */
  "functions": {
    "api/**/*.js": {
      "runtime": "nodejs22.x",
      "memory": 512,
      "maxDuration": 10
    }
  },

  /*
    Optional: Skip rebuilds when only docs / non-source files changed.
    Safe default – you can keep or remove.
  */
  "ignoreCommand": "git diff --quiet HEAD^ HEAD -- . ':!src' ':!public' ':!api' ':!package.json' ':!vite.config.js' ':!vercel.json'",

  /*
    Let Vercel know we’re a static (Vite) frontend—build output goes to /dist.
    (Vercel already detects Vite, but being explicit is harmless.)
  */
  "framework": "vite",
  "buildCommand": "npm run build",
  "outputDirectory": "dist"
}
