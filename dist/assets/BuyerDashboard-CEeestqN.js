import{r as t,j as e}from"./index-BJYG5pbX.js";import{u as x,d as h}from"./AuthContext-xg4VlSpd.js";import{d as u,e as f}from"./index-68602d24-D5m4K3rK.js";function N(){const{user:a,loading:r,logout:d}=x(),[l,o]=t.useState([]),[n,i]=t.useState(!1);return t.useEffect(()=>{!a||r||(async()=>{i(!0);try{const s=u(h,"users",a.uid,"purchases"),m=await f(s);o(m.docs.map(c=>({id:c.id,...c.data()})))}finally{i(!1)}})()},[a,r]),e.jsxs("main",{className:"section container",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{children:"Buyer Dashboard"}),e.jsx("button",{className:"btn",onClick:d,children:"Logout"})]}),!a&&!r&&e.jsx("p",{children:"Please sign in."}),r&&e.jsx("p",{children:"Loading..."}),a&&!r&&e.jsxs(e.Fragment,{children:[n&&e.jsx("p",{children:"Loading purchases…"}),l.length===0&&!n&&e.jsxs("div",{className:"rounded-2xl border border-[#e2e8f0] p-5 bg-white",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No purchases yet"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Explore photos and buy your first image."})]}),e.jsx("div",{className:"grid",children:l.map(s=>e.jsxs("article",{className:"rounded-2xl border border-[#e2e8f0] p-5 bg-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.previewUrl?e.jsx("img",{src:s.previewUrl,alt:s.title||"Purchased photo",className:"h-16 w-16 object-cover rounded-md"}):e.jsx("div",{className:"h-16 w-16 rounded-md bg-[#f1f5f9]"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900 text-sm",children:s.title||"Untitled"}),e.jsxs("div",{className:"text-slate-600 text-xs",children:["₹",s.amount||"—"," • ",s.currency||"INR"]})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[s.downloadUrl?e.jsx("a",{className:"btn btn-primary",href:s.downloadUrl,target:"_blank",rel:"noreferrer",children:"Download HD"}):e.jsx("span",{className:"text-xs text-slate-500",children:"Download link not available"}),s.licenseUrl&&e.jsx("a",{className:"btn",href:s.licenseUrl,target:"_blank",rel:"noreferrer",children:"License"})]})]},s.id))})]})]})}export{N as default};
